<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Contact — Pullman Abidjan</title>
<meta name="theme-color" content="#0b6b48">

<!-- iOS -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://script.google.com" crossorigin>
<link rel="preconnect" href="https://script.googleusercontent.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- ================= EARLY DATA LOAD ================= -->
<script>
(function(){
  function qs(k){return new URL(location.href).searchParams.get(k)||''}
  const id=(qs('id')||'').trim();
  if(!id){
    document.documentElement.innerHTML='<body style="padding:24px;color:#000;background:#fff">Paramètre id manquant</body>';
    return;
  }

  const DEPLOY_ID='AKfycbx6gzLF2I63qsrjP-NzAZSvJFpHk03HQEbHtM2mfe4cHovumTGAfSnwsTKGLw1Lt0stSA';
  const API=`https://script.google.com/macros/s/${DEPLOY_ID}/exec?mode=jsonp&id=${encodeURIComponent(id)}&callback=onDataEarly`;
  const CACHE_KEY=`contact_cache_${id}`;

  window.onDataEarly=function(data){
    try{
      if(data && !data.error){
        localStorage.setItem(CACHE_KEY,JSON.stringify({ts:Date.now(),data}));
        if(typeof window.__renderContact==='function'){
          window.__renderContact(data);
        }
      }
    }catch(e){}
  };

  const js=document.createElement('script');
  js.src=API;
  document.head.appendChild(js);
})();
</script>

<style>
:root{
  --bg-img:url('assets/bg.jpg');
  --contact-bg:url('assets/fond-contact.jpg');

  /* OVERLAY ULTRA LÉGER (IMAGE PRESQUE BRUTE) */
  --overlay:linear-gradient(
    180deg,
    rgba(0,0,0,0.00),
    rgba(0,0,0,0.08)
  );

  --heritage:#0b6b48;
  --vibrant:#00c070;
  --radius-xl:22px;
  --radius-md:14px;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:'Noto Sans',system-ui,sans-serif;
  background:var(--overlay),var(--bg-img);
  background-size:cover;
  background-position:center;
  background-attachment:fixed;
  color:#ffffff;
}

.wrap{max-width:620px;margin:auto;padding:20px}

/* HERO */
.hero{text-align:center;margin-bottom:28px}
.hero h1{font-size:22px;font-weight:700}
.hero p{font-size:15px;color:#f3f4f6;margin-top:4px}

/* CARDS */
.card{
  position:relative;
  border-radius:var(--radius-xl);
  overflow:hidden;
  margin-bottom:18px;
  padding:24px 22px;
  border:1px solid rgba(255,255,255,.18);
  box-shadow:0 10px 24px rgba(0,0,0,.18);
}
.card.contact{background:var(--contact-bg) center/cover no-repeat}
.card.site{background:var(--bg-img) center/cover no-repeat}

.card::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(
    180deg,
    rgba(0,0,0,.12),
    rgba(0,0,0,.25)
  );
}
.card>*{position:relative;z-index:1}

/* TEXT */
h2{text-align:center;font-size:19px;font-weight:700;margin-bottom:6px}
.muted{text-align:center;font-size:14px;color:#f1f5f9;margin-bottom:10px}

/* ROWS */
.row{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 14px;
  border-radius:var(--radius-md);
}
.row:active{background:rgba(255,255,255,.12)}
.val a{color:#fff;text-decoration:none;font-size:15px}

.copy{
  margin-left:auto;
  padding:6px 10px;
  border-radius:10px;
  background:rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.35);
  color:#fff;
  font-size:12px;
}

/* BUTTON */
.btn{
  display:inline-flex;
  justify-content:center;
  padding:16px 28px;
  border-radius:40px;
  font-weight:700;
  background:var(--vibrant);
  color:#0a0a0a;
  text-decoration:none;
  width:min(420px,92%);
}
.btn-wrap{text-align:center;margin-top:18px}

/* WhatsApp */
#row-wa .val a{color:#25D366;font-weight:600}

/* BANNER */
.banner{position:relative;height:220px;border-radius:18px;overflow:hidden}
.banner::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(
    180deg,
    rgba(0,0,0,.10),
    rgba(0,0,0,.25)
  );
}
.banner-content{
  position:absolute;
  inset:0;
  z-index:2;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap:8px;
}

/* SKELETON */
.skel .bar{
  height:12px;
  border-radius:8px;
  background:rgba(255,255,255,.35);
  animation:pulse 1.2s infinite ease-in-out;
}
@keyframes pulse{0%{opacity:.5}50%{opacity:1}100%{opacity:.5}}

/* ANIMATION */
.fade-in{animation:fadeSlide .45s ease-out both}
@keyframes fadeSlide{
  from{opacity:0;transform:translateY(8px)}
  to{opacity:1;transform:translateY(0)}
}
</style>
</head>

<body>
<div class="wrap">

<section class="hero">
  <h1>Bienvenue à l’Hôtel Pullman Abidjan</h1>
  <p>Scannez pour enregistrer le contact ou visiter notre site.</p>
</section>

<section class="card contact">
  <h2 id="fn">Contact</h2>
  <p id="subtitle" class="muted"></p>

  <div id="skel" class="skel">
    <div class="row"><div class="bar" style="width:60%"></div></div>
    <div class="row"><div class="bar" style="width:40%"></div></div>
    <div class="row"><div class="bar" style="width:70%"></div></div>
  </div>

  <div id="row-tel" class="row" style="display:none">
    <div class="val"><a id="telLink"></a></div>
    <button class="copy" data-copy>Copier</button>
  </div>

  <div id="row-wa" class="row" style="display:none">
    <div class="val"><a id="waLink"></a></div>
  </div>

  <div id="row-mail" class="row" style="display:none">
    <div class="val"><a id="mailLink"></a></div>
    <button class="copy" data-copy>Copier</button>
  </div>

  <p id="preview" class="muted" style="display:none"></p>

  <div class="btn-wrap">
    <a id="btnVcf" class="btn" href="#">Enregistrer le contact</a>
  </div>
</section>

<section class="card site">
  <div class="banner">
    <div class="banner-content">
      <h3>Pullman Abidjan — Officiel</h3>
      <p>Offres, services, événements et plus.</p>
      <a id="btnSiteHero" class="btn" href="#" target="_blank">Visiter le site</a>
    </div>
  </div>
</section>

</div>

<script>
(function(){
  const telLink=document.getElementById('telLink');
  const mailLink=document.getElementById('mailLink');
  const waLink=document.getElementById('waLink');
  const rowTel=document.getElementById('row-tel');
  const rowWa=document.getElementById('row-wa');
  const rowMail=document.getElementById('row-mail');
  const btnSiteHero=document.getElementById('btnSiteHero');
  const btnVcf=document.getElementById('btnVcf');
  const skel=document.getElementById('skel');
  const preview=document.getElementById('preview');

  window.__renderContact=function(d){
    if(skel) skel.style.display='none';

    rowTel.style.display='none';
    rowWa.style.display='none';
    rowMail.style.display='none';
    preview.style.display='none';

    const fn=[d.prenom||'',d.nom||''].join(' ').trim()||'Contact';
    document.getElementById('fn').textContent=fn;
    document.getElementById('subtitle').textContent=d.poste||'';

    const previewParts=[];

    if(d.telephone){
      telLink.textContent=d.telephone;
      telLink.href=`tel:${d.telephone}`;
      rowTel.style.display='';
      previewParts.push(d.telephone);

      let waNum=d.telephone.replace(/[^\d]/g,'');
      if(!waNum.startsWith('225')) waNum='225'+waNum;
      waLink.textContent='Contacter sur WhatsApp';
      waLink.href=`https://wa.me/${waNum}`;
      rowWa.style.display='';
    }

    if(d.email){
      mailLink.textContent=d.email;
      mailLink.href=`mailto:${d.email}`;
      rowMail.style.display='';
      previewParts.push(d.email);
    }

    if(previewParts.length){
      preview.textContent=previewParts.join(' • ');
      preview.style.display='block';
    }

    btnSiteHero.href=d.hotelSite||'#';

    document.querySelectorAll('.row, .btn-wrap').forEach(el=>{
      el.classList.add('fade-in');
    });

    document.querySelectorAll('[data-copy]').forEach(btn=>{
      btn.onclick=()=>{
        const text=btn.previousElementSibling.innerText;
        navigator.clipboard.writeText(text);
        const old=btn.textContent;
        btn.textContent='Copié ✓';
        setTimeout(()=>btn.textContent=old,1500);
      };
    });
  };

  try{
    const id=new URL(location.href).searchParams.get('id');
    const raw=localStorage.getItem('contact_cache_'+id);
    if(raw){
      const c=JSON.parse(raw);
      if(c && c.data){
        window.__renderContact(c.data);
      }
    }
  }catch(e){}
})();
</script>

</body>
</html>
